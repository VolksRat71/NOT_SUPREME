{"version":3,"file":"static/webpack/static\\development\\pages\\update.js.8ffd0155de8661244448.hot-update.js","sources":["webpack:///./components/UpdateItem.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport { Mutation, Query } from 'react-apollo';\r\nimport gql from 'graphql-tag';\r\nimport Form from './styles/Form';\r\nimport formatMoney from '../lib/formatMoney';\r\nimport Error from './ErrorMessage';\r\nimport Router from 'next/router';\r\n\r\nconst SINGLE_ITEM_QUERY = gql`\r\n    query SINGLE_ITEM_QUERY($id: ID!) {\r\n        item(where: { id: $id }) {\r\n            id\r\n            title\r\n            description\r\n            price\r\n        }\r\n    }\r\n`\r\n\r\nconst UPDATE_ITEM_MUTATION = gql`\r\n    mutation UPDATE_ITEM_MUTATION (\r\n        $id: ID!\r\n        $title: String\r\n        $description: String\r\n        $price: Int\r\n    ){\r\n        updateItem(\r\n            id: $id\r\n            title: $title\r\n            description: $description\r\n            price: $price\r\n        ) {\r\n            id\r\n            title\r\n            description\r\n            price\r\n        }\r\n    }\r\n`\r\n\r\nclass UpdateItem extends Component {\r\n    state = {}\r\n\r\n    handleChange = e => {\r\n        const { name, type, value } = e.target;\r\n        const val = type === 'number' ? parseFloat(value) : value\r\n        this.setState({ [name]: val })\r\n    }\r\n\r\n    updateItem = async (e, updateItemMutation) => {\r\n        e.preventDefault();\r\n        console.log('Updating Item');\r\n        console.log(this.state);\r\n        const res = await updateItemMutation({\r\n            variables: {\r\n                id: this.props.id,\r\n                ...this.state\r\n            }\r\n        })\r\n        console.log('Updated');\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Query query={SINGLE_ITEM_QUERY} variables={{\r\n                    id: this.props.id\r\n                }}>\r\n                {({ data, loading }) => {\r\n                    if(loading) return <p>Loading...</p>\r\n                    if(!data.item) return <p>No item found for ID:\"{this.props.id}\"</p>\r\n                    return (\r\n                        <Mutation\r\n                            mutation={UPDATE_ITEM_MUTATION}\r\n                            variables={this.state}>\r\n                            {(updateItem, { loading, error }) => (\r\n                                <Form onSubmit={e => {\r\n                                    this.updateItem(e, updateItem)\r\n                                }}>\r\n                                    <Error error={error} />\r\n                                    <fieldset disabled={loading} aria-busy={loading}>\r\n                                        <label htmlFor=\"title\">\r\n                                            Title\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                id=\"title\"\r\n                                                name=\"title\"\r\n                                                placeholder=\"Title\"\r\n                                                required\r\n                                                defaultValue={data.item.title}\r\n                                                onChange={this.handleChange}\r\n                                            />\r\n                                        </label>\r\n                                        <label htmlFor=\"price\">\r\n                                            Price\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                id=\"price\"\r\n                                                name=\"price\"\r\n                                                placeholder=\"Price\"\r\n                                                required\r\n                                                defaultValue={data.item.price}\r\n                                                onChange={this.handleChange}\r\n                                            />\r\n                                        </label>\r\n                                        <label htmlFor=\"description\">\r\n                                            Description\r\n                                            <textarea\r\n                                                id=\"description\"\r\n                                                name=\"description\"\r\n                                                placeholder=\"Enter A Description\"\r\n                                                required\r\n                                                defaultValue={data.item.description}\r\n                                                onChange={this.handleChange}\r\n                                            />\r\n                                        </label>\r\n                                        <button\r\n                                            type=\"submit\"\r\n                                        >Submit</button>\r\n                                    </fieldset>\r\n                                </Form>\r\n                            )}\r\n                        </Mutation>\r\n                    )\r\n                }}\r\n            </Query>\r\n        )\r\n    }\r\n}\r\n\r\nexport default UpdateItem;\r\nexport { UPDATE_ITEM_MUTATION };"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAWA;AACA;AAoBA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AAKA;AACA;AADA;AADA;AACA;AALA;AAIA;AAMA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;AAYA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AACA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAzCA;AAiDA;AAGA;;;;AAtFA;AACA;AAwFA;;;;;A","sourceRoot":""}